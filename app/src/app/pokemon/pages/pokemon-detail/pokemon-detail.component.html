<button class="back-button" (click)="goBack()">← Voltar</button>

<div *ngIf="pokemon; else loading" class="pokemon-detail">

  <header class="header">
    <h2>{{ pokemon.name | titlecase }}</h2>
  </header>

  <div class="content">

    <div class="image-wrapper">
      <img
        [src]="pokemon.image"
        [alt]="pokemon.name"
        loading="lazy"
      />
    </div>

    <div class="info">
      <p><strong>Altura:</strong> {{ pokemon.height }} m</p>
      <p><strong>Peso:</strong> {{ pokemon.weight }} kg</p>

      <div class="types">
        <strong>Tipos:</strong>
        <span
          class="type"
          *ngFor="let type of pokemon.types"
        >
          {{ type }}
        </span>
      </div>

      <div class="abilities">
        <strong>Habilidades:</strong>
        <span *ngFor="let ability of pokemon.abilities; let last = last">
          {{ ability }}<span *ngIf="!last">, </span>
        </span>
      </div>
    </div>
  </div>

  <section class="stats">
    <h3>Status Base</h3>

    <div
      class="stat"
      *ngFor="let stat of pokemon.stats"
    >
      <span class="stat-name">
        {{ stat.name | titlecase }}
      </span>

      <span class="stat-value">
        {{ stat.value }}
      </span>

      <div class="stat-bar">
        <div
          class="stat-fill"
          [style.width.%]="stat.value / 2"
        ></div>
      </div>
    </div>
  </section>

  <section class="cry" *ngIf="pokemon.cry">
    <h3>Som do Pokémon</h3>
    <audio controls>
      <source [src]="pokemon.cry" type="audio/ogg" />
      Seu navegador não suporta áudio.
    </audio>
  </section>

</div>

<ng-template #loading>
  <p>Carregando Pokémon...</p>
</ng-template>
